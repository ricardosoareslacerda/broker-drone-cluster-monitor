Roteiro Vídeo
- logar na conta AWS - Cloud9

- entrar na pasta config/cluster

- executar o comando 
	sh iniciar.sh
	
- executar o comando terminal node 1
	sh conectar.sh
		escolher 1
		
	docker swarm init
		copia token worker
	
	docker swarm join-token manager
		copia token manager
		
	copiar ip
	
- abrir outro terminal 
	sh conectar.sh
		escolher 2
		
	colar o token MANAGER
		docker swarm join --token SWMTKN-1-0xiuw5350mynbzsr1sctx13fntee3hefegccmxgjih2ppa8mhs-9jw7gt8xwjwy55xgj28vargmt 10.1.1.211:2377
	
	copiar ip
	
- abrir outro terminal 
	sh conectar.sh
		escolher 3
		
	colar o token WORKER
		ex.: docker swarm join --token SWMTKN-1-0xiuw5350mynbzsr1sctx13fntee3hefegccmxgjih2ppa8mhs-9jw7gt8xwjwy55xgj28vargmt 10.1.1.211:2377
		
	copiar ip
		
- retornar ao terminal node 1 e executar
	docker network create -d overlay broker-net
	
	git clone https://github.com/ricardosoareslacerda/broker-drone-cluster-monitor.git
	
	docker stack deploy -c ./broker-drone-cluster-monitor/docker stack deploy -c docker-compose-swarm-full.a.yml drone-stack
	
	docker stack deploy -c ./broker-drone-cluster-monitor/docker stack deploy -c docker-compose-swarm-full.b.yml drone-stack
	
	docker service ls
	
	docker stack ps drone-stack
	
- Acessos:
	NODE 1 IP: 18.207.236.38
	NODE 2 IP: 18.234.168.36
	NODE 3 IP: 52.23.177.183
	
	- Job:
		- docker service logs drone_stack_drone-kafka-job
		
	- Producer:
		- docker service logs drone_stack_drone-kafka-producer
		
	- Consumer:
		- docker service logs drone_stack_drone-kafka-consumer	
	
	- Visualizer:
		- http://18.234.168.36:8888
	
	- Kowl:
		- http://34.204.61.218:8077
	
	- Kafka Manager:
		- http://18.207.236.38:9000
		
	- Mongo Express:
		- http://52.23.177.183:8081
			- root
			- MongoExpress2022!
			
	- Gmail:
		- https://mail.google.com/mail/u/0
	
- para finalização executar 
	docker stack rm drone_stack
	
	docker volume rm drone_stack_zookeeper-data drone_stack_drone_zookeeper-txn-logs drone_stack_dronedb
	
	
	
	
	
	
- Testar aplicação teste kafka
- adequação o projeto 
	- separar em arquivos de stacks
		- TESTAR EXPOR PORTAS
		- TESTAR COLOCAR DIRETAMENTE O IP DO NÓ
		- TESTAR COLOCAR O COMANDO
		- docker-compose-stack-kafka.yml
		- docker-compose-stack-kafka-services.yml
		- docker-compose-stack-services.yml
	
	docker stack deploy -c ./broker-drone-cluster-monitor/docker-compose-kafka-cluster.yml drone-cluster
	docker stack deploy -c ./broker-drone-cluster-monitor/docker-compose-kafka-broker.yml drone-cluster
	docker stack deploy -c ./broker-drone-cluster-monitor/docker-compose-kafka-broker-webui.yml drone-cluster
	docker stack deploy -c ./broker-drone-cluster-monitor/docker-compose-kafka-cluster.yml drone-cluster
	
	docker service logs drone-cluster_zookeeper1
	docker service logs drone-cluster_kafka
	docker service logs drone-cluster_kowl
	docker service logs drone-cluster_mongo_dronedb
	docker service logs drone-cluster_mongo_express	
	docker service logs drone-cluster_visualizer
	docker service logs drone-cluster_drone-kafka-producer
	docker service logs drone-cluster_drone-kafka-consumer
	docker service logs drone-cluster_drone-kafka-job